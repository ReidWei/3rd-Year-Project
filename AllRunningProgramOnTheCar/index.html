<!DOCTYPE html>
<html>
<head>
    <title>Car</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
<script type="text/javascript">
    function topy(k){
        $.post('/',{k:k},function(){});
    }
    $(function(){
        window.document.onkeydown = abc;
        function abc(env){
            env = (env) ? env : window.event;
            if(env.keyCode=='87'){
                topy('w');
            }
            if(env.keyCode=='83'){
                topy('s');
            }
            if(env.keyCode=='65'){
                topy('a');
            }
            if(env.keyCode=='68'){
                topy('d');
            }
        }
        var i = null;
        $('.before').mousedown(function(){
            i = setInterval(function(){
                topy('w');
            },100);
        });
        $('.left').mousedown(function(){
            i = setInterval(function(){
                topy('a');
            },100);
        });
        $('.right').mousedown(function(){
            i = setInterval(function(){
                topy('d');
            },100);
        });
        $('.cabk').mousedown(function(){
            i = setInterval(function(){
                topy('s');
            },100);
        });
        $('#main span').mouseup(function(){
            clearInterval(i);
        });
    });
</script>
<style type="text/css">
    #main{width: 150px;height: 150px;background: #ccc;}
    #main span{width: 50px;height: 50px;float: left;z-index: 999;}
    #main span.on2{background: #ff00ff;}
</style>
<div id="main">
    <span></span>
    <span class="on2 before"></span>
    <span></span>
    <span class="on2 left"></span>
    <span></span>
    <span class="on2 right"></span>
    <span></span>
    <span class="on2 cabk"></span>
    <span></span>
</div>
</body>
</html>